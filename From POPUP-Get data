FORM POPUP .
  REFRESH T_FIELDS[].
  CLEAR T_FIELDS.
  T_FIELDS-TABNAME = 'ZYH_BD_MUSAK_P'.
  T_FIELDS-FIELDNAME = 'ZTRNO'.
  APPEND T_FIELDS.

  CLEAR T_FIELDS.
  T_FIELDS-TABNAME = 'ZYH_BD_MUSAK_P'.
  T_FIELDS-FIELDNAME = 'ZTRTY'.
  APPEND T_FIELDS.

  CLEAR T_FIELDS.
  T_FIELDS-TABNAME = 'EKPO'.
  T_FIELDS-FIELDNAME = 'BLK_REASON_TXT'.
  T_FIELDS-FIELDTEXT = 'Reason Of Issuing'.

  APPEND T_FIELDS.

  DATA LV_RET TYPE CHAR1.
*  'A' Cancelled ' ' --> accepted
  CALL FUNCTION 'POPUP_GET_VALUES'
    EXPORTING
*     NO_VALUE_CHECK  = ' '
      POPUP_TITLE     = 'Vechile Details'
      START_COLUMN    = '50'
      START_ROW       = '5'
    IMPORTING
      RETURNCODE      = LV_RET
    TABLES
      FIELDS          = T_FIELDS[]
    EXCEPTIONS
      ERROR_IN_FIELDS = 1
      OTHERS          = 2.
  IF SY-SUBRC <> 0.
    MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
            WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
* Implement suitable error handling here
  ENDIF.



  LOOP AT T_FIELDS.
    CASE T_FIELDS-FIELDNAME.
      WHEN 'ZTRNO'.
        P_TRNO = T_FIELDS-VALUE.
      WHEN 'ZTRTY'.
        P_TRTY = T_FIELDS-VALUE.
      WHEN 'BLK_REASON_TXT'.
        P_RESN = T_FIELDS-VALUE.
    ENDCASE.
  ENDLOOP.

ENDFORM.
